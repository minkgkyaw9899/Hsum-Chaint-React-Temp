name: PR Notify

on:
  pull_request_target:
    types: [opened, closed, synchronize]
    branches: [main, staging, develop]

jobs:
  pr-opened:
    if: github.event.action == 'opened'
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      message: |
        ğŸ”” *New PR Opened*
        ğŸ“¦ `${{ github.repository }}`
        ğŸ‘¤ ${{ github.actor }}
        ğŸ“Œ ${{ github.event.pull_request.title }}
        ğŸŒ¿ `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`
        ğŸ”— ${{ github.event.pull_request.html_url }}

  pr-updated:
    if: github.event.action == 'synchronize'
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      message: |
        ğŸ”„ *PR Updated*
        ğŸ“¦ `${{ github.repository }}`
        ğŸ‘¤ ${{ github.actor }}
        ğŸ“Œ ${{ github.event.pull_request.title }}
        ğŸŒ¿ `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`
        ğŸ”— ${{ github.event.pull_request.html_url }}

  pr-merged:
    if: github.event.action == 'closed' && github.event.pull_request.merged == true
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      message: |
        âœ… *PR Merged*
        ğŸ“¦ `${{ github.repository }}`
        ğŸ‘¤ ${{ github.actor }}
        ğŸ“Œ ${{ github.event.pull_request.title }}
        ğŸŒ¿ `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`
        ğŸ”— ${{ github.event.pull_request.html_url }}

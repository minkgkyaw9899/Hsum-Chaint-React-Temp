name: PR Notify

on:
  pull_request_target:
    types: [opened, closed, synchronize]
    branches: [main, staging, develop]

jobs:
  pr-opened:
    if: github.event.action == 'opened'
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      format: HTML
      message: |
        <b>ðŸ”” New PR Opened</b>

        <b>Project:</b> NextJS
        <b>Actor:</b> ${{ github.actor }}
        <b>Title:</b> ${{ github.event.pull_request.title }}
        <b>Branch:</b> <code>${{ github.head_ref }}</code> â†’ <code>${{ github.base_ref }}</code>

  pr-updated:
    if: github.event.action == 'synchronize'
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      format: HTML
      message: |
        <b>ðŸ”„ PR Updated</b>
        <b>Project:</b> <code>${{ github.repository }}</code>
        <b>Actor:</b> ${{ github.actor }}
        <b>Title:</b> ${{ github.event.pull_request.title }}
        <b>Branch:</b> <code>${{ github.head_ref }}</code> â†’ <code>${{ github.base_ref }}</code>

  pr-merged:
    if: github.event.action == 'closed' && github.event.pull_request.merged == true
    uses: ./.github/workflows/reusable-telegram.yml
    secrets: inherit
    with:
      format: HTML
      message: |
        <b>ðŸ”” PR Merged</b>

        <b>Project:</b> NextJS
        <b>Actor:</b> ${{ github.actor }}
        <b>Title:</b> ${{ github.event.pull_request.title }}
        <b>Branch:</b> <code>${{ github.head_ref }}</code> â†’ <code>${{ github.base_ref }}</code>
